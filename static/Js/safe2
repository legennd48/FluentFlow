console.log('working');

// Get the file input element, image box element, and translate button
const fileInput = document.getElementById('image-upload');
const imageBox = document.getElementById('image-box');
const translateButton = document.querySelector(".buttn[type='button']");

// Display selected image
fileInput.addEventListener('change', function (event) {
  if (event.target.files && event.target.files[0]) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const img = document.createElement('img');
      img.src = e.target.result;
      imageBox.innerHTML = ''; // Clear any previous image
      imageBox.appendChild(img);
    };
    reader.readAsDataURL(event.target.files[0]);
  }
});

// Translate image text
translateButton.addEventListener('click', async function (event) {
  event.preventDefault();

  // Only proceed if an image is selected
  if (fileInput.files && fileInput.files[0]) {
    const formData = new FormData();
    formData.append("image", fileInput.files[0]);
    formData.append("Target_Language", document.querySelector(".buttn[name='Target_Language']").value);

    try {
      const response = await fetch("/ocr", {
        method: "POST",
        body: formData,
      });

      const data = await response.json();
      document.getElementById("translated-text").textContent = data.translatedText;

    } catch (error) {
      console.error("Error:", error);
      // Handle errors appropriately, e.g., display an error message to the user
    }
  } else {
    // Handle the case where no image is selected
    alert("Please select an image to translate.");
  }
});
